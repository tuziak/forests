function draw_chart(){fetch("https://raw.githubusercontent.com/tuziak/forests/main/regions.geojson").then((e=>e.json())).then((e=>{regions=e,function(){mapboxgl.accessToken="pk.eyJ1IjoidHV6aWFrIiwiYSI6ImNsaGlybHdpbTBiMmgzcW51cDRvZHoyMWQifQ.zngFQXHvnbk1jKeGo4_Oeg";var e=new mapboxgl.Map({container:"map_forest",style:"mapbox://styles/tuziak/cluid6v7500f301nta2cl5cdh",center:[38.183,48.991],zoom:10,minZoom:5,maxZoom:12,maxBounds:[27.147217,45.205263,43.758545,51.467697]});e.on("load",(()=>{e.resize(),e.addControl(new mapboxgl.ScaleControl({position:"bottom-right"})),e.addControl(new mapboxgl.FullscreenControl),e.addSource("boundaries",{type:"geojson",data:regions,generateId:!0}),e.addLayer({id:"regions_boundaries",type:"fill",source:"boundaries",layout:{},paint:{"fill-color":"white","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.1,0]}}),e.addLayer({id:"regions_outline",type:"line",source:"boundaries",layout:{},paint:{"line-color":"#91818A","line-width":.1,"line-opacity":.5}});const o=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});let t=null;e.on("mousemove",["regions_boundaries"],(a=>{e.getCanvas().style.cursor="pointer";const n=`<h3>${a.features[0].properties.name_ua} область</h3> <div>За 2022-2023 рр. на території області повністю втрачено<span style="background:#fff200;"><strong> ${a.features[0].properties.loss} га </span></strong>лісу орієнтовною вартістю ${(.235*+a.features[0].properties.loss).toFixed()} млн грн.</div>`;for(;Math.abs(a.lngLat.lng-a.lngLat[0])>180;)a.lngLat[0]+=a.lngLat.lng>a.lngLat[0]?360:-360;o.setLngLat(a.lngLat).setHTML(n).addTo(e),a.features.length>0&&(t&&e.setFeatureState({source:"boundaries",id:t},{hover:!1}),t=a.features[0].id,e.setFeatureState({source:"boundaries",id:t},{hover:!0}))})),e.on("mouseleave",["regions_boundaries"],(()=>{e.getCanvas().style.cursor="",o.remove(),null!==t&&(e.setFeatureState({source:"boundaries",id:t},{hover:!1}),t=null)})),document.getElementById("highlight_map").addEventListener("change",(()=>{switch(event.target.value){case"fly_1":e.flyTo({center:[38.183,48.991],zoom:10,essential:!0});break;case"fly_2":e.flyTo({center:[30.016,51.247],zoom:9,essential:!0});break;case"fly_3":e.flyTo({center:[32.151,46.424],zoom:11,essential:!0});break;case"fly_4":e.flyTo({center:[33.067,46.665],zoom:10,essential:!0});break;case"fly_5":e.flyTo({center:[37.684,49.783],zoom:12,essential:!0});break}}))}))}()})).catch((e=>{}))}window.addEventListener("load",(e=>{draw_chart()}));